{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","services/persons.js","components/Notification.js","components/App.js","index.js"],"names":["Filter","filter","handleChange","onChange","value","PersonForm","handleSubmit","handleInput","handleNumber","newName","newNumber","onSubmit","type","Person","name","number","deleteContact","onClick","id","Persons","contactsToShow","map","person","url","axios","get","then","response","data","newObj","post","r","delete","put","Notification","message","className","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","msg","notif","setNotif","useEffect","personServices","RegExp","test","event","target","preventDefault","trimWS","n","trim","replace","contact","some","p","duplicateObj","find","console","log","catch","err","concat","error","setTimeout","window","confirm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.46ea7aa7.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({filter, handleChange}) => {\r\n\r\n    \r\n\r\n    return(\r\n        <>\r\n            filter shown with <input onChange={handleChange} value={filter} />\r\n        </>\r\n    )\r\n}\r\n    \r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({\r\n    handleSubmit,\r\n    handleInput,\r\n    handleNumber,\r\n    newName,\r\n    newNumber,\r\n}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n        <div>\r\n          name: <input value={newName} onChange={handleInput} />\r\n        </div>\r\n        <div>\r\n            number: <input value={newNumber} onChange={handleNumber} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Person = ({name,number,deleteContact}) => {\r\n    return<div>\r\n        <>{name.name} {number} </>\r\n        <button onClick={()=>{deleteContact(name.id)}}>Delete</button>\r\n    </div>\r\n    \r\n}\r\n\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\n\r\nconst Persons = ({contactsToShow,deleteContact}) => {\r\n    return contactsToShow.map( person => \r\n        <Person name={person} number={person.number} key={person.name} deleteContact={deleteContact}/>\r\n    )\r\n}\r\n\r\nexport default Persons","import axios from 'axios'\r\n// const url = 'http://localhost:3001/api/persons'\r\nconst url = '/api/persons'\r\nconst getAll = () => axios.get(url).then(response=>response.data)\r\nconst create = (newObj) => axios.post(url,newObj).then(r=>r.data)\r\nconst deleteContact = (id) => axios.delete(`${url}/${id}`)\r\nconst update = (id, newObj) => axios.put(`${url}/${id}`,newObj).then(r=>r.data)\r\n\r\nexport default { getAll, create, deleteContact, update }","import React from 'react'\r\n\r\nconst Notification = ({message,type}) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className={type}>\r\n        {message}\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport Filter from './Filter'\r\nimport PersonForm from './PersonForm'\r\nimport Persons from './Persons'\r\nimport personServices from '../services/persons'\r\nimport Notification from './Notification'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filter, setFilter ] = useState('')\r\n  const [ notif, setNotif ] = useState({msg:null,type:'success'})\r\n\r\n  useEffect(()=>{\r\n    personServices\r\n      .getAll()\r\n      .then((response) => {\r\n        setPersons(response)\r\n      })\r\n  },[])\r\n\r\n  const contactsToShow = persons.filter((person => {\r\n      const regexp = new RegExp(filter, 'gi')\r\n      return regexp.test(person.name)\r\n  }))\r\n  \r\n  const handleInput = (event) => setNewName(event.target.value)\r\n  const handleNumber = (event) => setNewNumber(event.target.value)\r\n  const handleChange = event => {setFilter(event.target.value)}\r\n  \r\n  const handleSubmit = (event) => {\r\n      event.preventDefault()\r\n      const trimWS = n => n.trim().replace(/\\s\\s+/g, ' ')\r\n      const contact = {name: trimWS(newName), number: newNumber}\r\n      if(persons.some(p => trimWS(p.name) === trimWS(newName))){\r\n        const duplicateObj = persons.find(p=>trimWS(p.name) === trimWS(newName))\r\n        const id = duplicateObj.id\r\n        const newObj = {...duplicateObj, number: newNumber}\r\n        personServices.update(id, newObj)\r\n          .then( response => {\r\n            console.log(response)\r\n            setPersons(persons.map(p => p.id !== id ? p : response))\r\n            setNotif({msg:`Updated ${response.name}`,type:'success'})\r\n          })\r\n          .catch(err => {\r\n            const message = `Information of ${contact.name} has already been removed from server`\r\n            setNotif({msg:message,type:'fail'})\r\n          })\r\n      } else {\r\n        personServices\r\n          .create(contact)\r\n          .then( response => {\r\n            setPersons(persons.concat(response))\r\n            setNotif({msg:`Added ${response.name}`,type:'success'})\r\n          })\r\n          .catch(error => {\r\n            const { data } = error.response\r\n            setNotif({msg: data.message, type: 'fail'})\r\n            console.log(data)\r\n          })\r\n      }\r\n      setTimeout(()=>{setNotif({msg:null,type:null})},3000)\r\n      setNewName('')\r\n      setNewNumber('')\r\n  }\r\n  const deleteContact = (id) => {\r\n    if(window.confirm('Are you sure ?')){\r\n      console.log(`deleting ${id}`)\r\n      personServices.deleteContact(id).catch( err => {\r\n        const message = `The contact has already been removed from server`\r\n        setNotif({msg:message,type:'fail'})\r\n      })\r\n      setTimeout(()=>{setNotif({msg:null,type:null})},3000)\r\n      setPersons(persons.filter(p=>p.id!==id))\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={notif.msg} type={notif.type} />\r\n      <Filter handleChange={handleChange} filter={filter}/>\r\n      <h3>add a new</h3>\r\n      <PersonForm \r\n        handleSubmit={handleSubmit}\r\n        handleInput={handleInput}\r\n        handleNumber={handleNumber}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n      />\r\n      <h3>Numbers</h3>\r\n      <Persons contactsToShow={contactsToShow} deleteContact={deleteContact} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './components/App'\r\nimport './index.css'\r\n\r\n\r\nReactDOM.render(\r\n  <App />, document.getElementById('root')\r\n);"],"sourceRoot":""}